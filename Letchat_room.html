<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>   
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Birthstone&family=Cedarville+Cursive&display=swap" rel="stylesheet">
     <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
     <link href="https://fonts.googleapis.com/css?family=Yeon+Sung&display=swap" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1">
     <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js"></script>
    
    </head>

    <body>
        <button id="signout" class="glyphicon glyphicon-log-out btn btn-danger" onclick="logout()"> Logout </button>  
        <br>
        <br>  
        <center>
            <h1 id="username"> </h1>
            <div id="output">

            </div>
            <input tpe="text" id="room" placeholder="type in here the room name"> 
            &nbsp; 
            <button id="send" class="btn btn-success" onclick="roomname()"> Send </button>
            
            

        </center>

        
        
            
    
        
    </body>
    <style>
        body{
            font-family: 'Birthstone', cursive;
            font-size: 20px; 
            background-color: darkcyan;
        }
        #room{
        width: 1475px
        
        }
        .inline{
            text-align: center;
            display: inline;
        }
    </style>
    <script type="module">
        var firebaseConfig = {  
     apiKey: "AIzaSyAK3UA-eTe67fqDNWXhNhPOQEgnDZ7M4Eg",
  authDomain: "project-95-a84c2.firebaseapp.com",
  databaseURL: "https://project-95-a84c2-default-rtdb.firebaseio.com",
  projectId: "project-95-a84c2",
  storageBucket: "project-95-a84c2.appspot.com",
  messagingSenderId: "701054959398",
  appId: "1:701054959398:web:94743671464ed3698c4be7"

  };
  
    firebase.initializeApp(firebaseConfig);
  
  user_name = localStorage.getItem("Username");
  
  document.getElementById("user_name").innerHTML = "Welcome " + user_name + "!";
  
  function roomname()
  {
    room_name = document.getElementById("room").value;
  
    firebase.database().ref("/").child(room_name).update({
      purpose : "adding room name"
    });
  
      localStorage.setItem("Room Name", room_name);
      
      window.location = "kwitter_page.html";
  }
  
  function getData() {  firebase.database().ref("/").on('value', function(snapshot) { document.getElementById("output").innerHTML = ""; snapshot.forEach(function(childSnapshot) { childKey  = childSnapshot.key;
         Room_names = childKey;
         console.log("Room Name - " + Room_names);
        row = "<div class='room_name' id="+Room_names+" onclick='redirectToRoomName(this.id)' >#"+ Room_names +"</div><hr>";
        document.getElementById("output").innerHTML += row;
      });
    });
  
  }
  
  getData();
  
  function redirectToRoomName(name)
  {
    console.log(name);
    localStorage.setItem("room_name", name);
      window.location = "kwitter_page.html";
  }
  
  function logout() {
  localStorage.removeItem("user_name");
  localStorage.removeItem("room_name");
      window.location = "index.html";
  }
          
    </script>
</html>
  